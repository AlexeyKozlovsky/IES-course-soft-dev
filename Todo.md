## Задание на разработку модуля управления устройством EPSS13

### Описание возможных состояний девайса (EPSS13)

| Название состояния  | Описание состояния                                                                                                                                                         | Код состояния |
| ------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------- |
| Подключено          | Состояние, когда до аппаратного устройства установлено стабильное соединение                                                                                               | П-1           |
| Отключено           | Состояние, когда: либо не было попытки установки соединения до аппаратного устройства, либо последнее соединение было прервано самим пользователем (а не внешней причиной) | О-1           |
| Соединение потеряно | Состояние, когда подключение не установлено и было потеряно по внешним причинам после последней успешной установки                                                         | О-2           |

### Описание параметров Девайса (EPSS13)

| Имя парамтра              | Описание параметра                                                                                                                                                                                                                                                                                                                    | Соответствие с регистровой картой                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Состояния, в котором доступно чтение | Состояния, в котором доступна запись |
| ------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------ | ------------------------------------ |
| Период внутреннего старта | Период стартового импульса внутреннего генератор. Измеряется в нс.<br><br>В соответствие с этим периодом вырабатываются старты внутреннего генератора.<br><br>Если устройство работает в "Режиме работы от внутреннего генератора", то сигналы на каналах таймера вырабатываются в соответствие с периодом этого стартового импульса. | Находится в двух Holding регистрах. Кодируется 32 битами. Один холдинг регистр отвечает за младший байт, другой за старший. Например, чтобы хранить число 1 (0000 0000 0000 0000 0000 0000 0000 0001), в двух последовательных регистрах будет записано [1, 0] соответственно.<br>Если в двух последовательных регистрах записано [0, 1], то это означает число 65536 (0000 0000 0000 0001 0000 0000 0000 0000)<br><br>Номер регистров: 2, 3<br><br><br>Для того, чтобы перевести число, хранимое в регистрах необходимо домножить уже получившееся слиянием 32битное число на 25 и после этого прибавить 100 нс.<br><br>1 дискрет (единица) в значениях регистра = 25 нс. (поэтому и идет домножение на 25).<br><br>Если в регистре лежит [0, 0] (т.е. 0), то это означает 100 нс (сдвиг).<br><br>Пример: в регистрах лежат значения [4, 0]. "Склеиваем" в обратном порядке, получаем 0000 0000 0000 0000 0000 0000 0000 0100 (или 0x00000004). В десятичной системе -- это 4.<br><br>Мы получили значение из регистровой карты в ДИСКРЕТАХ. Теперь надо домножить его на 25 нс, чтобы получить значения в нс. `4 * 25 = 100` .<br><br>Далее, необходимо добавить сдвиг 100 нс. `100 + 100 = 200` .<br><br>***Итого: если в регистрах 2,3 лежит [4, 0], то это означает, что период внутреннего старта равен 200 нс*** | П-1                                  | П-1                                  |


### Описание вариантов использования девайса EPSS13

| Вариант использования              | Описание варианта использования                                                                                                                                                                                                                                                                                                                     | Название классов UseCase                                                                                                                                                                                                                                                                                                                                                                                                     | Формат запроса | Формат ответа                                        | Состояние, в котором доступен вариант | Ссылка на коммит с добавлением варианта использования |
| ---------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- | ---------------------------------------------------- | ------------------------------------- | ----------------------------------------------------- |
| Получить период внутреннего старта | Получает значение периода внутреннего генератора в нс. <br><br>Минимальное значение 100 нс, максимальное значение: 2 мс. Шаг 100 нс (т.е. не может быть 130 нс). Округление значение идет в соответствие с математическими правилами.<br><br><br>Вариант можно использовать только в том случае, если установлено подключение к аппаратному девайсу | - **GetInnerStartPeroidUseCase**: класс юзкейса<br>- GetInnerStartPeriodUseCaseRequest: класс запроса юзкейса<br>- GetInnerStartPeriodUseCaseResponse:<br>- класс запроса юзкейса<br><br>- **GetInnerStartPeriod**: метод сущности девайса<br>- **GetInnerStartPeriodRequest**: входной параметр метода сущности девайса<br>- **GetInnerStartPeriodResponse**:<br>- выходной (возвращаемый) параметр метода сущности девайса | <br>           | 1. ErrorCode (код ошибки)<br>2. uint64_t (результат) | П-1                                   |                                                       |
